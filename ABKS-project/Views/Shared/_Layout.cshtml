<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] ABKS_project</title>
    <!-- CSS Links -->
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="~/assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="~/assets/vendor/aos/aos.css" rel="stylesheet">
    <link href="~/assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
    <link href="~/assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
    <link href="~/assets/css/main.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
</head>
<body>
    <header id="header" class="header d-flex align-items-center" style="min-height:10vh;">
        <div class="container-fluid container-xl d-flex align-items-center justify-content-between">
            <a href="index" class="logo d-flex align-items-center">
                <img src="~/assets/img/Aim_Gurkha.svg" alt="BKAS Training" style="max-height: 80px; margin-left: -55px;">
            </a>

            <nav class="navbar" id="navbar">
                <ul class="d-flex align-items-center" style="text-decoration:none">
                    <li><a class="nav-link" asp-area="" asp-controller="Home" asp-action="Index">Home</a></li>
                    @if (User.IsInRole("User"))
                    {
                        <li><a class="nav-link" asp-area="" asp-controller="Home" asp-action="StudentEvaluation">View Evaluation</a></li>
                    }
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="galleryDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            Gallery
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="galleryDropdown">
                            <li><a class="dropdown-item" asp-area="" asp-controller="Home" asp-action="Videos"> Videos</a></li>
                            <li><a class="dropdown-item" asp-area="" asp-controller="Home" asp-action="Images">Images</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" asp-area="Ecommerce" asp-controller="Home" asp-action="ListProduct">Product</a>
                    </li>
                    <li><a class="nav-link" asp-area="" asp-controller="Home" asp-action="AboutUs">About Us</a></li>
                    <li><a class="nav-link" asp-area="" asp-controller="Home" asp-action="Contact">Contact</a></li>
                </ul>
            </nav>

            <div class="d-flex align-items-center">
                @if (User.IsInRole("User"))
                {
                    <a class="nav-link d-flex align-items-center" asp-area="Ecommerce" asp-controller="Home" asp-action="GetUserCart">
                        <span id="cartCount" class="badge text-bg-info">0</span>
                        <i class="bi bi-cart text-Black" style="margin-right: 15px;"></i>

                    </a>
                    <a class="nav-link" asp-area="Ecommerce" asp-controller="UserOrder" asp-action="GetOrdersByUserId">My Orders</a>
                }

                @if (User.Identity.IsAuthenticated)
                {
                    <div class="dropdown ms-3">
                        <a class="text-white dropdown-toggle d-flex align-items-center" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="bi bi-person-circle me-2" style="color:black;"></i>
                            <span style=" color:black;">@User.Identity.Name</span>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown" style=" color: var(--color-primary);">
                            <li><a class="dropdown-item" asp-area="" asp-controller="Home" asp-action="Profile"><i class="bi bi-person"></i> Profile</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" asp-area="" asp-controller="Home" asp-action="Logout"><i class="bi bi-box-arrow-right"></i> Logout</a></li>
                        </ul>
                    </div>
                }
                else
                {
                    <a class="btn btn-primary btn-sm ms-3" asp-area="" asp-controller="Home" asp-action="Login">Login</a>
                }
            </div>

            <i class="mobile-nav-toggle mobile-nav-show bi bi-list" style=" color: black"></i>
            <i class="mobile-nav-toggle mobile-nav-hide d-none bi bi-x"  style=" color: black"></i>
        </div>
    </header>
    <div class="zero">
        <main role="main" class="pb-3" style="min-height:70vh;">
            @RenderBody()
        </main>
    </div>

    <footer id="footer" class="footer" style="min-height:30vh;" >
        <div class="container">
            <div class="row gy-4">
                <div class="col-lg-5 col-md-12 footer-info">
                    <a href="index.html" class="logo d-flex align-items-center">
                        <span>Aim Gurkha</span>
                    </a>
                    <p>
                        "Join our Army Training Center for comprehensive programs covering physical conditioning, weapons proficiency,
                        tactical maneuvers, leadership, and more. We focus on teamwork, discipline, and resilience to prepare you for
                        military service. Embark on a journey of growth, camaraderie, and service to our nation."
                    </p>
                    <div class="social-links d-flex mt-4">
                        <a href="#" class="twitter"><i class="bi bi-twitter"></i></a>
                        <a href="#" class="facebook"><i class="bi bi-facebook"></i></a>
                        <a href="#" class="instagram"><i class="bi bi-instagram"></i></a>
                        <a href="#" class="linkedin"><i class="bi bi-linkedin"></i></a>
                    </div>
                </div>

                <div class="col-lg-2 col-6 footer-links">
                    <h4>Useful Links</h4>
                    <ul>
                        <li><a href="#">Home</a></li>
                        <li><a href="#">About us</a></li>
                        <li><a href="#">Services</a></li>
                        <li><a href="#">Product</a></li>
                    </ul>
                </div>

                <div class="col-lg-2 col-6 footer-links">
                    <h4>Our Services</h4>
                    <ul>
                        <li><a href="#">Nepali Army Training</a></li>
                        <li><a href="#">Neplai Police Training</a></li>
                        <li><a href="#">Indian Army Training</a></li>
                        <li><a href="#">British Army Training</a></li>
                    </ul>
                </div>

                <div class="col-lg-3 col-md-12 footer-contact text-center text-md-start">
                    <h4>Contact Us</h4>
                    <p>
                        Lalitpur Nepal,<br>
                        <strong>Phone:</strong> +977- 9867443889<br>
                        <strong>Email:</strong> info@service.com<br>
                    </p>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="copyright">
                &copy; Copyright <strong><span>ABKS Team</span></strong>. All Rights Reserved
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="~/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="~/assets/vendor/aos/aos.js"></script>
    <script src="~/assets/vendor/glightbox/js/glightbox.min.js"></script>
    <script src="~/assets/vendor/purecounter/purecounter_vanilla.js"></script>
    <script src="~/assets/vendor/swiper/swiper-bundle.min.js"></script>
    <script src="~/assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
    <script src="~/assets/vendor/php-email-form/validate.js"></script>
    <script src="~/assets/js/main.js"></script>
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
    <script src="~/lib/jquery-validation/dist/additional-methods.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    @await RenderSectionAsync("Scripts", required: false)

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            loadCartCount();
        });

        async function loadCartCount() {
            try {
                var response = await fetch('/Ecommerce/Home/GetTotalItemInCart');
                if (response.ok) {
                    var result = await response.json();
                    var cartCountEl = document.getElementById('cartCount');
                    if (cartCountEl) {
                        cartCountEl.innerHTML = result;
                    }
                }
            } catch (err) {
                console.error(err);
            }
        }
    </script>

    </script>
</body>
</html>
